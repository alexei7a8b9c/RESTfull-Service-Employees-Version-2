### Base URL
@baseUrl = http://localhost:8080

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

> {%
    client.global.set("admin_token", response.body.data.token);
%}

###
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "user",
  "password": "user123"
}

> {%
    client.global.set("user_token", response.body.data.token);
%}

### –¢–ï–°–¢ 1: –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏ —Å—Ç–∞—Ç—É—Å—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (ADMIN)
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "status": "ACTIVE",
  "page": 0,
  "size": 10,
  "sortBy": "firstName",
  "sortDirection": "ASC"
}

> {%
    client.test("ADMIN search by name AND status", function() {
        client.assert(response.status === 200, "Search should be successful");
        client.log("üîç ADMIN: –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ 'John Doe' –∏ —Å—Ç–∞—Ç—É—Å—É 'ACTIVE'");
        if (response.body.data) {
            client.log("üìä –ù–∞–π–¥–µ–Ω–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: " + response.body.data.totalElements);
            client.log("üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞: " + (response.body.data.number + 1) + " –∏–∑ " + response.body.data.totalPages);
        }
    });
%}

### –¢–ï–°–¢ 2: –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏ —Å—Ç–∞—Ç—É—Å—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (USER)
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "Jane",
  "lastName": "Smith",
  "status": "ACTIVE",
  "page": 0,
  "size": 5
}

> {%
    client.test("USER search by name AND status", function() {
        client.assert(response.status === 200, "USER should be able to search with multiple params");
        client.log("üîç USER: –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ 'Jane Smith' –∏ —Å—Ç–∞—Ç—É—Å—É 'ACTIVE'");
    });
%}

### –¢–ï–°–¢ 3: –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ –æ—Ç–¥–µ–ª–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "status": "ACTIVE",
  "departmentIds": [1, 2],
  "page": 0,
  "size": 15,
  "sortBy": "lastName",
  "sortDirection": "ASC"
}

> {%
    client.test("Search by status AND departments", function() {
        client.assert(response.status === 200, "Search by status and departments should work");
        client.log("üîç –ü–æ–∏—Å–∫: —Å—Ç–∞—Ç—É—Å 'ACTIVE' –∏ –æ—Ç–¥–µ–ª—ã [1, 2]");
        if (response.body.data) {
            client.log("üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: " + response.body.data.totalElements);
        }
    });
%}

### –¢–ï–°–¢ 4: –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ —Å—Ç–∞—Ç—É—Å—É
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "managerName": "John",
  "status": "ACTIVE",
  "page": 0,
  "size": 10
}

> {%
    client.test("Search by manager name AND status", function() {
        client.assert(response.status === 200, "Search by manager and status should work");
        client.log("üîç –ü–æ–∏—Å–∫: –º–µ–Ω–µ–¥–∂–µ—Ä 'John' –∏ —Å—Ç–∞—Ç—É—Å 'ACTIVE'");
    });
%}

### –¢–ï–°–¢ 5: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫ - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "status": "ACTIVE",
  "managerName": "John",
  "departmentIds": [1, 2, 3],
  "page": 0,
  "size": 20,
  "sortBy": "hireDate",
  "sortDirection": "DESC"
}

> {%
    client.test("Complex search - all parameters", function() {
        client.assert(response.status === 200, "Complex search with all parameters should work");
        client.log("üîç –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ü–û–ò–°–ö:");
        client.log("   - –ò–º—è: John");
        client.log("   - –§–∞–º–∏–ª–∏—è: Doe");
        client.log("   - –°—Ç–∞—Ç—É—Å: ACTIVE");
        client.log("   - –ú–µ–Ω–µ–¥–∂–µ—Ä: John");
        client.log("   - –û—Ç–¥–µ–ª—ã: [1, 2, 3]");
        client.log("   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –¥–∞—Ç–µ –Ω–∞–π–º–∞ (DESC)");
        if (response.body.data) {
            client.log("üìä –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ: " + response.body.data.totalElements);
        }
    });
%}

### –¢–ï–°–¢ 6: –ü–æ–∏—Å–∫ —Å —á–∞—Å—Ç–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (—Ç–æ–ª—å–∫–æ –∏–º—è –∏ –æ—Ç–¥–µ–ª—ã)
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "John",
  "departmentIds": [1],
  "page": 0,
  "size": 10
}

> {%
    client.test("Partial parameters search", function() {
        client.assert(response.status === 200, "Search with partial parameters should work");
        client.log("üîç –ü–æ–∏—Å–∫ —Å —á–∞—Å—Ç–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: –∏–º—è 'John' –∏ –æ—Ç–¥–µ–ª [1]");
    });
%}

### –¢–ï–°–¢ 7: –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –æ—Ç–¥–µ–ª–∞–º (–±–µ–∑ –¥—Ä—É–≥–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤)
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "departmentIds": [1, 2, 3, 4],
  "page": 0,
  "size": 25,
  "sortBy": "firstName",
  "sortDirection": "ASC"
}

> {%
    client.test("Search only by departments", function() {
        client.assert(response.status === 200, "Search only by departments should work");
        client.log("üîç –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –æ—Ç–¥–µ–ª–∞–º: [1, 2, 3, 4]");
        if (response.body.data) {
            client.log("üìä –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –æ—Ç–¥–µ–ª–∞—Ö: " + response.body.data.totalElements);
        }
    });
%}

### –¢–ï–°–¢ 8: –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ –∏–º–µ–Ω–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "a",
  "status": "ACTIVE",
  "page": 0,
  "size": 3,
  "sortBy": "lastName",
  "sortDirection": "ASC"
}

> {%
    client.test("Search with pagination and multiple filters", function() {
        client.assert(response.status === 200, "Search with pagination and filters should work");
        client.log("üîç –ü–æ–∏—Å–∫: –∏–º—è —Å–æ–¥–µ—Ä–∂–∏—Ç 'a', —Å—Ç–∞—Ç—É—Å 'ACTIVE', —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 0, —Ä–∞–∑–º–µ—Ä 3");
        if (response.body.data) {
            const content = response.body.data.content;
            client.log("üìÑ –ü–∞–≥–∏–Ω–∞—Ü–∏—è:");
            client.log("   - –°—Ç—Ä–∞–Ω–∏—Ü–∞: " + (response.body.data.number + 1));
            client.log("   - –†–∞–∑–º–µ—Ä: " + response.body.data.size);
            client.log("   - –í—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü: " + response.body.data.totalPages);
            client.log("   - –í—Å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: " + response.body.data.totalElements);
            if (content && content.length > 0) {
                client.log("üë• –ü–µ—Ä–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏:");
                for (let i = 0; i < Math.min(content.length, 3); i++) {
                    client.log("   " + (i+1) + ". " + content[i].firstName + " " + content[i].lastName + " (" + content[i].status + ")");
                }
            }
        }
    });
%}

### –¢–ï–°–¢ 9: –ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ —Å—Ç–∞—Ç—É—Å–µ ON_LEAVE –∏–ª–∏ TERMINATED
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "status": "ON_LEAVE",
  "page": 0,
  "size": 10
}

> {%
    client.test("Search by ON_LEAVE status", function() {
        client.assert(response.status === 200, "Search by ON_LEAVE status should work");
        client.log("üîç –ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –æ—Ç–ø—É—Å–∫–µ (ON_LEAVE)");
        if (response.body.data) {
            client.log("üìä –ù–∞–π–¥–µ–Ω–æ: " + response.body.data.totalElements);
        }
    });
%}

### –¢–ï–°–¢ 10: –ü–æ–∏—Å–∫ –ø–æ –ø—É—Å—Ç—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (–≤—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "page": 0,
  "size": 50
}

> {%
    client.test("Search with empty filters (all employees)", function() {
        client.assert(response.status === 200, "Search with empty filters should return all employees");
        client.log("üîç –ü–æ–∏—Å–∫ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–≤—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)");
        if (response.body.data) {
            client.log("üìä –í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ: " + response.body.data.totalElements);
            client.log("üìÑ –°—Ç—Ä–∞–Ω–∏—Ü: " + response.body.data.totalPages);
        }
    });
%}

### –¢–ï–°–¢ 11: –ü–æ–∏—Å–∫ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "NonexistentName",
  "lastName": "NonexistentLastName",
  "status": "TERMINATED",
  "departmentIds": [999],
  "page": 0,
  "size": 10
}

> {%
    client.test("Search with non-existent parameters", function() {
        client.assert(response.status === 200, "Search should work even with non-existent parameters");
        client.log("üîç –ü–æ–∏—Å–∫ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:");
        client.log("   - –ò–º—è: NonexistentName");
        client.log("   - –§–∞–º–∏–ª–∏—è: NonexistentLastName");
        client.log("   - –°—Ç–∞—Ç—É—Å: TERMINATED");
        client.log("   - –û—Ç–¥–µ–ª: [999]");
        if (response.body.data) {
            client.log("üìä –ù–∞–π–¥–µ–Ω–æ: " + response.body.data.totalElements + " (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0)");
            client.assert(response.body.data.totalElements === 0, "Should find 0 employees with non-existent parameters");
        }
    });
%}

### –¢–ï–°–¢ 12: –ü–æ–∏—Å–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "status": "ACTIVE",
  "page": 0,
  "size": 5,
  "sortBy": "firstName",
  "sortDirection": "ASC"
}

> {%
    client.global.set("asc_results", response.body.data.content);
%}

###

POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "status": "ACTIVE",
  "page": 0,
  "size": 5,
  "sortBy": "firstName",
  "sortDirection": "DESC"
}

> {%
    client.test("Sorting comparison test", function() {
        client.assert(response.status === 200, "Search with DESC sorting should work");
        const ascResults = client.global.get("asc_results");
        const descResults = response.body.data.content;

        if (ascResults && descResults && ascResults.length > 0 && descResults.length > 0) {
            client.log("üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:");
            client.log("   - ASC –ø–µ—Ä–≤—ã–π: " + ascResults[0].firstName + " " + ascResults[0].lastName);
            client.log("   - DESC –ø–µ—Ä–≤—ã–π: " + descResults[0].firstName + " " + descResults[0].lastName);

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç ASC –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω—å—à–µ –ø–µ—Ä–≤–æ–≥–æ DESC)
            if (ascResults[0].firstName < descResults[0].firstName) {
                client.log("‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ");
            }
        }
    });
%}

### –¢–ï–°–¢ 13: –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–∑–Ω—ã–º —Ä–∞–∑–º–µ—Ä–∞–º —Å—Ç—Ä–∞–Ω–∏—Ü
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "page": 0,
  "size": 1
}

> {%
    client.global.set("size_1_count", response.body.data.totalElements);
%}

###

POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "page": 0,
  "size": 5
}

> {%
    client.global.set("size_5_count", response.body.data.totalElements);
%}

###

POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "page": 0,
  "size": 10
}

> {%
    client.test("Pagination size test", function() {
        client.assert(response.status === 200, "Different page sizes should work");
        const size1 = client.global.get("size_1_count");
        const size5 = client.global.get("size_5_count");
        const size10 = response.body.data.totalElements;

        client.log("üîç –¢–µ—Å—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏:");
        client.log("   - size=1: " + size1 + " –≤—Å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤");
        client.log("   - size=5: " + size5 + " –≤—Å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤");
        client.log("   - size=10: " + size10 + " –≤—Å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤");

        // –í—Å–µ —Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
        client.assert(size1 === size5 && size5 === size10, "Total elements count should be consistent across different page sizes");
    });
%}

### –§–ò–ù–ê–õ–¨–ù–´–ô –¢–ï–°–¢: –°–≤–æ–¥–∫–∞ –ø–æ –≤—Å–µ–º —Ç–µ—Å—Ç–∞–º –ø–æ–∏—Å–∫–∞
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "page": 0,
  "size": 100
}

> {%
    client.test("Final search summary", function() {
        client.assert(response.status === 200, "Final search should work");
        client.log(" ");
        client.log("üéâ –í–°–ï –¢–ï–°–¢–´ –ü–û–ò–°–ö–ê –ó–ê–í–ï–†–®–ï–ù–´!");
        client.log("‚úÖ –ü–æ–∏—Å–∫ –ø–æ –æ–¥–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É");
        client.log("‚úÖ –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ");
        client.log("‚úÖ –ü–æ–∏—Å–∫ —Å —á–∞—Å—Ç–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏");
        client.log("‚úÖ –ü–æ–∏—Å–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π");
        client.log("‚úÖ –ü–æ–∏—Å–∫ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏");
        client.log("‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π (ADMIN –∏ USER)");
        client.log(" ");
        client.log("üìä –í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ: " + response.body.data.totalElements);
        client.log("üöÄ –°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!");
    });
%}