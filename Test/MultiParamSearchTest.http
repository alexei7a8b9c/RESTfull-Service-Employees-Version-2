### Base URL
@baseUrl = http://localhost:8080

### 1. –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

> {%
    client.global.set("admin_token", response.body.data.token);
    client.log("üîë ADMIN token –ø–æ–ª—É—á–µ–Ω");
%}

###
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "user",
  "password": "user123"
}

> {%
    client.global.set("user_token", response.body.data.token);
    client.log("üîë USER token –ø–æ–ª—É—á–µ–Ω");
%}

### 2. –¢–ï–°–¢–´ –î–õ–Ø USER - –ü–û–ò–°–ö –ü–û –ù–ï–°–ö–û–õ–¨–ö–ò–ú –ü–û–õ–Ø–ú

### –¢–µ—Å—Ç 2.1: USER - –ò–º—è + –§–∞–º–∏–ª–∏—è + –°—Ç–∞—Ç—É—Å
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "status": "ACTIVE",
  "page": 0,
  "size": 10,
  "sortBy": "firstName",
  "sortDirection": "ASC"
}

> {%
    client.test("USER: Search by first name + last name + status", function() {
        client.assert(response.status === 200, "USER should be able to search by multiple fields");
        client.log("üîç USER: –ò–º—è='John' + –§–∞–º–∏–ª–∏—è='Doe' + –°—Ç–∞—Ç—É—Å='ACTIVE'");
        if (response.body.data) {
            client.log("üìä –ù–∞–π–¥–µ–Ω–æ: " + response.body.data.totalElements + " —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤");
        }
    });
%}

### –¢–µ—Å—Ç 2.2: USER - –°—Ç–∞—Ç—É—Å + –û—Ç–¥–µ–ª—ã
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "status": "ACTIVE",
  "departmentIds": [1, 2],
  "page": 0,
  "size": 15,
  "sortBy": "lastName",
  "sortDirection": "ASC"
}

> {%
    client.test("USER: Search by status + departments", function() {
        client.assert(response.status === 200, "USER should be able to search by status and departments");
        client.log("üîç USER: –°—Ç–∞—Ç—É—Å='ACTIVE' + –û—Ç–¥–µ–ª—ã=[1,2]");
        if (response.body.data) {
            client.log("üìä –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –æ—Ç–¥–µ–ª–∞—Ö 1,2: " + response.body.data.totalElements);
        }
    });
%}

### –¢–µ—Å—Ç 2.3: USER - –ò–º—è + –û—Ç–¥–µ–ª—ã
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "Jane",
  "departmentIds": [1, 3],
  "page": 0,
  "size": 10
}

> {%
    client.test("USER: Search by first name + departments", function() {
        client.assert(response.status === 200, "USER should be able to search by name and departments");
        client.log("üîç USER: –ò–º—è='Jane' + –û—Ç–¥–µ–ª—ã=[1,3]");
    });
%}

### –¢–µ—Å—Ç 2.4: USER - –§–∞–º–∏–ª–∏—è + –°—Ç–∞—Ç—É—Å + –ü–∞–≥–∏–Ω–∞—Ü–∏—è
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "lastName": "Smith",
  "status": "ACTIVE",
  "page": 0,
  "size": 5,
  "sortBy": "hireDate",
  "sortDirection": "DESC"
}

> {%
    client.test("USER: Search by last name + status + pagination", function() {
        client.assert(response.status === 200, "USER should be able to search with complex filters");
        client.log("üîç USER: –§–∞–º–∏–ª–∏—è='Smith' + –°—Ç–∞—Ç—É—Å='ACTIVE' + –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –Ω–∞–π–º–∞ (DESC)");
    });
%}

### 3. –¢–ï–°–¢–´ –î–õ–Ø ADMIN - –ü–û–ò–°–ö –ü–û –ù–ï–°–ö–û–õ–¨–ö–ò–ú –ü–û–õ–Ø–ú

### –¢–µ—Å—Ç 3.1: ADMIN - –ò–º—è + –§–∞–º–∏–ª–∏—è + –°—Ç–∞—Ç—É—Å
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "status": "ACTIVE",
  "page": 0,
  "size": 10,
  "sortBy": "firstName",
  "sortDirection": "ASC"
}

> {%
    client.test("ADMIN: Search by first name + last name + status", function() {
        client.assert(response.status === 200, "ADMIN should be able to search by multiple fields");
        client.log("üîç ADMIN: –ò–º—è='John' + –§–∞–º–∏–ª–∏—è='Doe' + –°—Ç–∞—Ç—É—Å='ACTIVE'");
        if (response.body.data) {
            client.log("üìä –ù–∞–π–¥–µ–Ω–æ: " + response.body.data.totalElements + " —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤");
        }
    });
%}

### –¢–µ—Å—Ç 3.2: ADMIN - –°—Ç–∞—Ç—É—Å + –û—Ç–¥–µ–ª—ã
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "status": "ACTIVE",
  "departmentIds": [1, 2, 3],
  "page": 0,
  "size": 15,
  "sortBy": "lastName",
  "sortDirection": "ASC"
}

> {%
    client.test("ADMIN: Search by status + multiple departments", function() {
        client.assert(response.status === 200, "ADMIN should be able to search by status and departments");
        client.log("üîç ADMIN: –°—Ç–∞—Ç—É—Å='ACTIVE' + –û—Ç–¥–µ–ª—ã=[1,2,3]");
        if (response.body.data) {
            client.log("üìä –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –æ—Ç–¥–µ–ª–∞—Ö 1,2,3: " + response.body.data.totalElements);
        }
    });
%}

### –¢–µ—Å—Ç 3.3: ADMIN - –ò–º—è + –ú–µ–Ω–µ–¥–∂–µ—Ä + –°—Ç–∞—Ç—É—Å
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "John",
  "managerName": "John",
  "status": "ACTIVE",
  "page": 0,
  "size": 10
}

> {%
    client.test("ADMIN: Search by first name + manager + status", function() {
        client.assert(response.status === 200, "ADMIN should be able to search by name, manager and status");
        client.log("üîç ADMIN: –ò–º—è='John' + –ú–µ–Ω–µ–¥–∂–µ—Ä='John' + –°—Ç–∞—Ç—É—Å='ACTIVE'");
    });
%}

### –¢–µ—Å—Ç 3.4: ADMIN - –í—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "status": "ACTIVE",
  "managerName": "John",
  "departmentIds": [1, 2, 3, 4],
  "page": 0,
  "size": 25,
  "sortBy": "hireDate",
  "sortDirection": "DESC"
}

> {%
    client.test("ADMIN: Search with all possible filters", function() {
        client.assert(response.status === 200, "ADMIN should be able to search with all filters");
        client.log("üîç ADMIN: –í–°–ï –§–ò–õ–¨–¢–†–´:");
        client.log("   - –ò–º—è: John");
        client.log("   - –§–∞–º–∏–ª–∏—è: Doe");
        client.log("   - –°—Ç–∞—Ç—É—Å: ACTIVE");
        client.log("   - –ú–µ–Ω–µ–¥–∂–µ—Ä: John");
        client.log("   - –û—Ç–¥–µ–ª—ã: [1,2,3,4]");
        client.log("   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –¥–∞—Ç–µ –Ω–∞–π–º–∞ (DESC)");
        if (response.body.data) {
            client.log("üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: " + response.body.data.totalElements);
        }
    });
%}

### –¢–µ—Å—Ç 3.5: ADMIN - –ß–∞—Å—Ç–∏—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è + –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª–æ–≤
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "J",
  "status": "ACTIVE",
  "departmentIds": [1, 2],
  "page": 0,
  "size": 20,
  "sortBy": "firstName",
  "sortDirection": "ASC"
}

> {%
    client.test("ADMIN: Search with partial name + status + departments", function() {
        client.assert(response.status === 200, "ADMIN should be able to search with partial matches");
        client.log("üîç ADMIN: –ò–º—è —Å–æ–¥–µ—Ä–∂–∏—Ç 'J' + –°—Ç–∞—Ç—É—Å='ACTIVE' + –û—Ç–¥–µ–ª—ã=[1,2]");
        if (response.body.data) {
            client.log("üìä –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –Ω–∞ 'J' –≤ –∞–∫—Ç–∏–≤–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ: " + response.body.data.totalElements);
        }
    });
%}

### 4. –°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–´–ï –¢–ï–°–¢–´ USER vs ADMIN

### –¢–µ—Å—Ç 4.1: –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ–∏—Å–∫ - USER
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "John",
  "status": "ACTIVE",
  "departmentIds": [1],
  "page": 0,
  "size": 10,
  "sortBy": "lastName",
  "sortDirection": "ASC"
}

> {%
    client.test("USER: Standard multi-field search", function() {
        client.assert(response.status === 200, "USER search should work");
        client.log("üë§ USER: –ò–º—è='John' + –°—Ç–∞—Ç—É—Å='ACTIVE' + –û—Ç–¥–µ–ª=[1]");

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        if (response.body.data) {
            client.global.set("user_results", response.body.data);
            client.log("üìä USER –Ω–∞—à–µ–ª: " + response.body.data.totalElements + " —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤");
        }
    });
%}

### –¢–µ—Å—Ç 4.2: –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ–∏—Å–∫ - ADMIN
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "John",
  "status": "ACTIVE",
  "departmentIds": [1],
  "page": 0,
  "size": 10,
  "sortBy": "lastName",
  "sortDirection": "ASC"
}

> {%
    client.test("ADMIN: Same search as USER", function() {
        client.assert(response.status === 200, "ADMIN search should work");
        client.log("üëë ADMIN: –ò–º—è='John' + –°—Ç–∞—Ç—É—Å='ACTIVE' + –û—Ç–¥–µ–ª=[1]");

        const userResults = client.global.get("user_results");
        const adminResults = response.body.data;

        if (userResults && adminResults) {
            client.log("üìä –°–†–ê–í–ù–ï–ù–ò–ï:");
            client.log("   - USER –Ω–∞—à–µ–ª: " + userResults.totalElements + " —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤");
            client.log("   - ADMIN –Ω–∞—à–µ–ª: " + adminResults.totalElements + " —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤");

            // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞
            client.assert(userResults.totalElements === adminResults.totalElements,
                "USER and ADMIN should get same search results");

            if (userResults.totalElements === adminResults.totalElements) {
                client.log("‚úÖ USER –∏ ADMIN –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞!");
            }
        }
    });
%}

### –¢–µ—Å—Ç 4.3: –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ - USER
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "Nonexistent",
  "lastName": "User",
  "status": "TERMINATED",
  "departmentIds": [999],
  "page": 0,
  "size": 10
}

> {%
    client.test("USER: Search with non-existent combination", function() {
        client.assert(response.status === 200, "USER search should work even with no results");
        client.log("üîç USER: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤");
        if (response.body.data) {
            client.log("üìä –ù–∞–π–¥–µ–Ω–æ: " + response.body.data.totalElements + " (–æ–∂–∏–¥–∞–µ—Ç—Å—è 0)");
            client.assert(response.body.data.totalElements === 0, "Should find 0 employees with non-existent parameters");
        }
    });
%}

### –¢–µ—Å—Ç 4.4: –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ - ADMIN
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "firstName": "Nonexistent",
  "lastName": "User",
  "status": "TERMINATED",
  "departmentIds": [999],
  "page": 0,
  "size": 10
}

> {%
    client.test("ADMIN: Search with non-existent combination", function() {
        client.assert(response.status === 200, "ADMIN search should work even with no results");
        client.log("üîç ADMIN: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤");
        if (response.body.data) {
            client.log("üìä –ù–∞–π–¥–µ–Ω–æ: " + response.body.data.totalElements + " (–æ–∂–∏–¥–∞–µ—Ç—Å—è 0)");
        }
    });
%}

### 5. –¢–ï–°–¢–´ –ì–†–ê–ù–ò–ß–ù–´–• –°–õ–£–ß–ê–ï–í

### –¢–µ—Å—Ç 5.1: USER - –ü–æ–∏—Å–∫ —Å –ø—É—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "firstName": "",
  "lastName": "",
  "status": "ACTIVE",
  "page": 0,
  "size": 10
}

> {%
    client.test("USER: Search with empty strings + status", function() {
        client.assert(response.status === 200, "USER should handle empty strings");
        client.log("üîç USER: –ü—É—Å—Ç—ã–µ –∏–º–µ–Ω–∞ + –°—Ç–∞—Ç—É—Å='ACTIVE'");
    });
%}

### –¢–µ—Å—Ç 5.2: ADMIN - –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "page": 0,
  "size": 5,
  "sortBy": "firstName",
  "sortDirection": "ASC"
}

> {%
    client.test("ADMIN: Search with pagination only", function() {
        client.assert(response.status === 200, "ADMIN should handle pagination-only search");
        client.log("üîç ADMIN: –¢–æ–ª—å–∫–æ –ø–∞–≥–∏–Ω–∞—Ü–∏—è - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 0, —Ä–∞–∑–º–µ—Ä 5");
        if (response.body.data) {
            client.log("üìä –í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: " + response.body.data.totalElements);
        }
    });
%}

### –¢–µ—Å—Ç 5.3: USER - –ü–æ–∏—Å–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "status": "ACTIVE",
  "page": 0,
  "size": 5,
  "sortBy": "lastName",
  "sortDirection": "DESC"
}

> {%
    client.test("USER: Search with DESC sorting", function() {
        client.assert(response.status === 200, "USER should handle DESC sorting");
        client.log("üîç USER: –°—Ç–∞—Ç—É—Å='ACTIVE' + –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ñ–∞–º–∏–ª–∏–∏ (Z-A)");
    });
%}

### –§–ò–ù–ê–õ–¨–ù–´–ô –¢–ï–°–¢
POST {{baseUrl}}/api/employees/search
Authorization: Bearer {{user_token}}
Content-Type: application/json

{
  "page": 0,
  "size": 50
}

> {%
    client.test("Final system check", function() {
        client.assert(response.status === 200, "System should be working");
        client.log(" ");
        client.log("üéâ –í–°–ï –¢–ï–°–¢–´ –ü–û–ò–°–ö–ê –ü–û –ù–ï–°–ö–û–õ–¨–ö–ò–ú –ü–û–õ–Ø–ú –ó–ê–í–ï–†–®–ï–ù–´!");
        client.log("‚úÖ USER –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å –ø–æ –ª—é–±—ã–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º –ø–æ–ª–µ–π");
        client.log("‚úÖ ADMIN –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å –ø–æ –ª—é–±—ã–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º –ø–æ–ª–µ–π");
        client.log("‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è USER –∏ ADMIN");
        client.log("‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–æ–∂–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π");
        client.log("‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ –ø—É—Å—Ç—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã");
        client.log(" ");
        client.log("üìä –í—Å–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ: " + response.body.data.totalElements);
        client.log("üöÄ –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π!");
    });
%}